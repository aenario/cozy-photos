@import 'nib'

@import '_cozy'

// Fonts

@font-face
    font-family: styled
    src: url('/fonts/maven-pro-light-300.otf');

@font-face
    font-family: main
    src: url('/fonts/signika-regular.ttf');


// Colors

bgcolor = #fcfcfc
uploadcolor = #34a6ff
darkgrey = #444
basecolor = lightgrey
orange = #fe8800
blue = #34a6ff
bluegreen = #34A6BB
green = #5C5


// Commons

body
    background-color bgcolor
    padding: 20px

h1, h4
    font-family styled

.flatbtn
    margin-bottom 20px
    display block
    line-height 20px
    font-size 18px
    margin 2px 1%
    padding 10px 2%
    background-color blue
    color white
    cursor pointer
    text-transform capitalize
    width 100%
    border 0

    span
        text-align center
        margin-left: 10px

    i
        vertical-align baseline

.flatbtn:hover
    background-color orange
    color white
    text-decoration none

.flatbtn:focus
    background-color blue
    color white
    text-decoration none

.flatbtn:active
.flatbtn:focus
    background orange
    box-shadow 1px 3px 2px rgba(0, 0, 0, 0.2) inset

button.delete
    position absolute
    top 1px
    right 1px
    z-index 2
    padding 5px
    width: auto


#album, #album-list
    font-family main


// #### album list page ###

.albumitem
    float left

    a
        display: block
        border-radius: 2px
        overflow: hidden
        width: 300px
        height: 300px
        color: white
        text-decoration: none
        border-radius: 0
        box-sizing: border-box
        transition .2s ease-out
        -webkit-transition .2s ease-out
        background-repeat: no-repeat
        background-size: 100%

    .title
        z-index: 100
        border-radius: 0
        width: 300px
        height: 300px
        display: block
        opacity: 0

        padding-top: 135px
        font-size: 25px
        line-height: 25px
        text-align: center
        font-variant: small-caps
        color: white
        background-color: rgba(0,0,0,0.7)

        transition: all .2s ease-out

    &:hover
        .title
            opacity: 1

    a:active
        transition 0s ease-out
        -webkit-transition 0s ease-out
        box-shadow: 1px 3px 2px rgba(0, 0, 0, 0.2) inset, 0 1px 2px rgba(0, 0, 0, 0.0)

//a:hover
//border 1px solid orange

.albumitem.create
    background: green
    text-align: center
    transition: all .2s ease-out

    a
        font-size: 20px

    img
        width: auto
        margin-top: 100px
        margin-bottom: 10px

    &:hover
        background: orange


// #### album page ###

#album
    padding: 0

#links
    margin-bottom: 20px

    a
        margin: 0 10px 10px 0

#about
    float: left
    width: 300px
    margin-right: 20px

    #description
        text-align justify
        padding 1px
        border 0px

    #title
    #description
        font-weight: normal
        padding: 8px

    #title:active
    #description:active
        outline 0

#album.editing
    #title
        white-space: nowrap;
        overflow: hidden;
        br
            display:none;
        *
            display:inline;
            white-space:nowrap;

    #title:focus
    #description:focus
        outline 1px solid blue

    #title:hover
    #description:hover
        outline 1px solid orange

#photos
    min-height 300px
    box-sizing border-box

    &.dragover
        background-color orange

    #uploader
        opacity 0.0001
        display block
        // z-index -1
        height 100%
        font-size 30em
        line-height 100px
        position absolute

    .photo
        float left
        opacity: 0.9
        margin 0px
        position relative

        a
            display block
            width 200px
            height 200px
            vertical-align bottom
            overflow hidden
            background rgba(0,0,0,0.1)
            transition .4s ease-out
            -webkit-transition .4s ease-out
            border 1px solid transparent
            border: 0
            padding: 0
            outline: 0

            img
                width 100%
                height 100%

    .photo .progressfill
        width 100%
        height 0%
        position absolute
        bottom 0px
        background-color uploadcolor
        transition .3s
        -webkit-transition .3s

    .photo a.thumbed
        border 1px solid uploadcolor

    .photo:hover
        opacity: 1
        z-index: 3

        a
            z-index: 10
            padding: 0
            outline: 0
            box-shadow 0px 0px 10px #666
            transition .1s
            -webkit-transition:0.1s

#rebuild-th

    p
        padding-left: 10px

    a#rebuild-th-btn
        padding-left: 10px
        padding-bottom: 10px
        cursor: pointer

.editing #photos.empty
    border 1px solid orange


#uploadblock, #browseFiles
    width: 200px
    height: 200px
    display none
    margin 0px
    overflow hidden
    padding: 10px
    margin 0px
    position relative
    text-align center
    transition height 1s
    text-transform: lowercase
    float: left

#uploadblock.photo:hover
    transform scale(1)
    -webkit-transform scale(1)
    cursor: pointer

.editing #uploadblock, .editing #browseFiles
    display block

 .pbCaptionText
     .btn-group
         margin-left: 30px


// Clearance

.flatbtn.clearance
    background: green

#clearancemanager
  label
    font-weight normal

#cozy-clearance-modal
  .modal-dialog
    width 700px

  .input-group
    width 100%
    input
      width 90%
      height 34px
      line-height 1.428
      padding-left 5px
      -webkit-appearance button
    a.btn
      width 10%
      border-bottom-left-radius 0
      border-top-left-radius 0

#share-list
    list-style-type: none
    margin-top 5px
    padding-left 5px

    // will allow inline-block children to be vertically aligned
    li
      font-size 0
      letter-spacing 0
      word-spacing 0

      span
        display inline-block
        vertical-align middle

        &.clearance-name
          max-width 190px
          overflow hidden
          text-overflow ellipsis
          white-space nowrap

    select
        vertical-align middle
        font-size 14px
        margin-left 5px
        background: white
        border-bottom: 1px solid lightcolor

        &:focus
            outline: none

.modal-footer
    padding: 8px;
    border: 0px none;
    background: none repeat scroll 0% 0% transparent;

    a.flatbtn
        float: right
        text-align: left
        width: auto
        padding: 8px
        line-height: 10px
        font-size:  10px
        text-transform: lowercase


#inherited-share-list
  li.header
    list-style-type none
    margin-left -30px
    font-weight bold

.linkshow
  font-size 14px
  margin-bottom 5px
  margin-left -5px
  padding-left 10px
  line-height: 20px

  a.flatbtn.active
      background-color: blue

  label
      margin-top: 10px
      font-weight: normal

  input
    color #444
    width 70%

.typeahead.dropdown-menu > li > a
  padding: 3px 6px 3px 3px

.typeahead.dropdown-menu > li > a > img
  margin: 0 3px 0 0

.clearance-name
  font-size: 15px
  margin-left: 5px

  &:first-child
    margin-left: 50px

.clearance-btn
  font-size: 20px
  margin-left: 10px

.clearance-btn.revoke
  font-size: 12px

.clearance-line
  line-height: 47px
  border-bottom: 1px solid lightcolor
  padding-bottom: 5px

.modal-body
  max-height: 73%

  img
    border: 5px solid transparent
    height: 120px
    margin-bottom: 5px
    margin-right: 5px
    opacity: 0.8

  img.selected
    border: 5px solid blue
    height: 120px
    border-radius: 8px
    opacity: 1

.notifs-label
  margin-top: 30px
  font-weight: normal
  margin-bottom: 0px


#add-contact
    padding: 7px


// ### Logic ###
.mode-public .flatbtn
.mode-public .flatbtn.startediting
.mode-public .create
.mode-owner .empty .help
.stopediting
.delete
.editing .flatbtn.startediting
.mode-owner.editing .empty .help
    display none

.editing .flatbtn
.editing .delete
.mode-public .flatbtn.back
.flatbtn.back
.flatbtn.startediting
.flatbtn.download
.mode-public .empty .help
    display block

// # Remove effect from photobox //


exifTransforms = (1 rotateZ(0deg)) (2 scale(-1, 1)) (3 rotateZ(180deg)) (4 scale(1,-1)) \
(5 rotateZ(-90deg) scale(-1, 1)) (6 rotateZ(90deg)) (7 rotateZ(90deg) scale(-1, 1)) (8 rotateZ(-90deg))

pbtransition()
    transition .3s cubic-bezier(0.1, 0.87, 0.48, 1)
    transition-delay 0s
    opacity 1
    // -ms-transition .3s .5s ease-out

for t in exifTransforms
  id = t[0]

  #pbOverlay
    .wrapper img{'[data-orientation="' + id + '"]'}
      pbtransition true
      transform t[1] t[2]

    &.next .wrapper img{'[data-orientation="' + id + '"]'}
      pbtransition true
      transform translate(3000px, 0px) t[1] t[2]

      &.prepare
        transform translate(-3000px, 0px) t[1] t[2]

    &.prev .wrapper img{'[data-orientation="' + id + '"]'}
      pbtransition true
      transform translate(-3000px, 0px) t[1] t[2]

      &.prepare
        transform translate(3000px, 0px) t[1] t[2]

    .wrapper img.prepare{'[data-orientation="' + id + '"]'}
      pbtransition true
      transform translate(0px, 0px) t[1] t[2]


@media (max-width: 700px)
    .flatbtn
        width: auto

// Clipboard Trick

#clipboard-container
  position: fixed
  left: 0px
  top: 0px
  width: 0px
  height: 0px
  z-index: 100
  display: none
  opacity: 0

#clipboard
  width: 1px
  height: 1px
  padding: 0px


// Dirty fix required for clearance modal that includes a weird style for its remove button.
.icon-remove
    position: relative

.icon-remove:before
    content: "î€”";
    font-family: "Glyphicons Halflings";
    font-style: normal;
    font-weight: normal;
    text-decoration: inherit;
    cursor: pointer

#topbar
    background: #333
    height: 40px
    margin: -20px -20px 20px -20px

    #topbar-content
        max-width: 900px
        margin: auto

        img
            margin-right: 5px

        a
            color: white
            float: right
            font-weight: bold
            margin-top: 10px
            margin-right: 10px
            font-size: 12px

// Responsive

@media (max-width: 1210px)
    .flatbtn
        width 36%

@media (max-width: 767px)
    .flatbtn
        width 19%

    #rebuild-th
        display: none

